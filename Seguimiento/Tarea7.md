# Tarea 7: JQuery y AJAX

Las actividades que se han realizado en esta tarea son las que se van a comentar a continuación:

* **Botones de likes**: En esta tarea lo que se hace es eliminar el formulario relacionado con los likes y se implementa dentro de un script de JavaScript la modificación de los emojies de likes y *AJAX* para enviar si se quiere aumentar o disminuir los likes de una excursión en concreto a través de un booleano llamando al método *cambiar_likes*. Dichas modificaciones se pueden ver dentro de la visualización [excursion.html](https://github.com/mjls130598/Senderos/blob/7f45e9a1669ff02c64e9fa32c9d5eefb44eab567/rutas_granada/templates/rutas_granada/excursion.html#L169) y dentro de [views.py](https://github.com/mjls130598/Senderos/blob/7f45e9a1669ff02c64e9fa32c9d5eefb44eab567/rutas_granada/views.py#L69).

* **Modo noche**: Para este caso se ha insertado en la misma fila que para logearse o registrarse un sqitch en donde se puede poner con colores claros u oscuros la visualización de la aplicación (visible dentro de [base.html](https://github.com/mjls130598/Senderos/blob/7f45e9a1669ff02c64e9fa32c9d5eefb44eab567/rutas_granada/templates/base.html#L52)). Para ello, cuando se señala a ese switch se llama a un archivo *JQuery* [dark-mode-switch.min.js](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/static/rutas_granada/dark-mode-switch.min.js) que se encarga de indicar que se desea poner el tema oscuro o resetear las modificaciones en el *CSS*. Si se desea poner un tema oscuro, las modificaciones correspondientes al *CSS* se encuentran en el archivo static [dark-mode.css](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/static/rutas_granada/css/dark-mode.css).

* **Mostrar ventana de confirmación de eliminación de una excursión**: Aprovechando el botón creado previamente para el borrado de la excursión, el formulario que había en él pasa a formar parte de un *Modal* y dentro de él aparecerán dos botones (cancelar o eliminar) que llevarán al método correspondiente de la aplicación. Ese modal se puede ver dentro de [excursion.html](https://github.com/mjls130598/Senderos/blob/7f45e9a1669ff02c64e9fa32c9d5eefb44eab567/rutas_granada/templates/rutas_granada/excursion.html#L18).

* **Mostrar con AJAX los nuevos comentarios**: Cuando el usuario pulse sobre [*Enviar*](https://github.com/mjls130598/Senderos/blob/298a7c41fea88568cb71d64166370167a5a8d580/rutas_granada/templates/rutas_granada/excursion.html#L189) dentro del formulario de *Comentarios*, se llamará a una función [*AJAX*](https://github.com/mjls130598/Senderos/blob/298a7c41fea88568cb71d64166370167a5a8d580/rutas_granada/templates/rutas_granada/excursion.html#L204) que se encargará de llamar a [*aniadir_comentario*](https://github.com/mjls130598/Senderos/blob/298a7c41fea88568cb71d64166370167a5a8d580/rutas_granada/views.py#L82) junto a la información del formulario y guardarla en la base de datos. Además, este método envía el comentario nuevo para que lo muester.