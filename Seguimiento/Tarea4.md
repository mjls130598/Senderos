# Tarea 4: CRUD

Durante esta tarea se realizan las siguientes actividades relacionadas con CRUD:

* Primero, se creará una vista únicamente para mostrar la información de una excursión. En este caso se modificará el fichero [excursion.html](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/templates/rutas_granada/excursion.html) para que muestre toda la información almacenada en la base de datos sobre una excursión en concreto y se puedan realizar las funciones correspondientes sobre ella.

* A continuación, se implementa el borrado de una excursión. Para eso se modifica el primer formulario de la página (el que únicamente tiene el botón de la papelera) y se le indica que su acción es de tipo POST y llamo al método que se llama para mostrar la información de una excursión. Por lo tanto, se ha modificado dentro de [views.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/views.py) su método correspondiente para que cuando sea una petición GET muestre la página y para cuando sea POST, dependiendo del valor del input oculto de los formularios, haga una acción u otra.

* Seguidamente, se modifica [excursion.html](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/templates/rutas_granada/excursion.html) y [views.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/views.py) y se crea el fichero [forms.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/forms.py) para implementar un formulario dentro de una excursión para permitir al usuario escribir un comentario sobre ella. El formulario en cuestión se llama *ComentarioForm* y se crea y se guardan los datos recabados dentro del método *excursion* de views.py.

* Posteriormente, se vuelve a actualizar [excursion.html](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/templates/rutas_granada/excursion.html) y [views.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/views.py) para implementar el aumento de likes cuando se pulse al botón.

* Después, se centró en la funcionalidad de añadir excursiones a la base de datos. Para ello se creó en el archivo [excursiones.html](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/templates/rutas_granada/excursiones.html) un *Modal* para no tener que irnos a otra página a ver el formulario en el que los campos que deben estar en él se encuentran en la clase *ExcursionForm* el fichero [forms.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/forms.py). Para acceder al formulario y enviarla al servidor se ha creado una URL aparte en [urls.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/urls.py) que lleva al método *añade_excursion* de [views.py](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/views.py). En ese método se encarga de crear una nueva instancia y gaurdarla en la base de datos y guardar las fotos dadas dentro de la aplicación (en este caso se encuentran en el directorio [image](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/static/rutas_granada/images)). Para poder tratar con imágenes, ha sido necesario installar *Pillow* y sus librerías dentro del sistema operativo.

* En el caso de editar una excursión, se realiza dentro de la info de una excursión (en el archivo [excursion.html](https://github.com/mjls130598/Senderos/blob/main/rutas_granada/templates/rutas_granada/excursion.html)) dentro de un *Modal* para no tener que irnos a otra página a ver el formulario. Se realizan los cambios de forma similar a la creación de la excursión y de la adicción de comentarios.